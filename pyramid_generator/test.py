import os
import sys
# import json

where_i_am = os.path.dirname(os.path.realpath(__file__))
sys.path.append(where_i_am + "/../pipelineutilities/pipelineutilities")
from pyramid import ImageRunner  # noqa: E502
from pipeline_config import load_pipeline_config  # noqa: E502

# try:
if True:
    # event = json.loads("{\"config-file\": \"2020-04-28-12:43:07.205855.json\", \"process-bucket\": \"marble-manifest-prod-processbucket-kskqchthxshg\", \"errors\": [], \"local\": false}")
    event = {
      "config-file": "2020-08-13-18:01:55.405572.json",
      "process-bucket": "marble-manifest-prod-processbucket-kskqchthxshg",
      "errors": [],
      "local": False,
      "ecs-args": [
        "{\"config-file\": \"2020-08-13-18:01:55.405572.json\", \"process-bucket\": \"marble-manifest-prod-processbucket-kskqchthxshg\", \"errors\": [], \"local\": false}"
      ]
    }

    config = load_pipeline_config(event)
    config['ids'] = [
    "1977.019",
    "1979.123.001.003",
    "1980.122.001.004",
    "1980.122.004.025",
    "1980.136.001.010",
    "1981.080.001.030",
    "1981.080.002.026",
    "1981.108.013",
    "1983.040.002.007",
    "1986.056",
    "1987.046.005.001",
    "1994.028.004.047",
    "1997.041.005.018",
    "1997.044.009.003",
    "2019.007"
    ]
    print(config['ids'])

    runner = ImageRunner(config)
    runner.process_images()
# except Exception as e:
#     print(e)

"""
"2009.063.004",
"2009.063.007",
"2009.063.016",
"2009.064.001",
"2009.064.002",
"2009.064.003",
"2009.064.004",
"2009.064.005",
"2009.064.006",
"2009.064.008",
"2009.064.009",
"2009.064.010",
"2009.064.011",
"2009.064.012",
"2009.064.013",
"2009.064.015",
"2009.064.016",
"2009.064.017",
"2009.064.018",
"2009.064.019",
"2009.064.020",
"2009.068.003",
"2010.004",
"2010.005.021",
"2010.005.026",
"2010.005.027",
"2010.005.036",
"2010.023.001",
"2010.030",
"2010.031.045",
"2010.043.005",
"2011.001.001",
"2011.001.002",
"2011.006",
"2011.014",
"2011.015",
"2011.024.003",
"2011.024.006",
"2011.024.007",
"2011.024.011",
"2011.028",
"2011.036.009",
"2011.051",
"""

"""
"2012.003",
"2012.011.001",
"2012.028",
"2012.044",
"2012.045.001",
"2012.045.001.a",
"2012.045.001.c",
"2012.045.002",
"2012.045.002.a",
"2012.045.002.c",
"2012.097",
"2012.105",
"2012.107",
"2013.013.005",
"2013.017",
"2013.023.002",
"2013.028.080",
"2013.030",
"2013.035",
"2013.039.001",
"2013.039.006",
"2013.039.007",
"2013.047.002",
"2014.011",
"2014.019.003",
"2014.020",
"2014.023.001",
"2014.023.004",
"2014.027",
"2014.032.001",
"2014.033",
"2014.037",
"2014.041.001",
"2014.041.003",
"2014.047.003",
"2014.050.001",
"2014.052.001",
"2014.052.002",
"2014.052.003",
"2014.052.004",
"2014.052.005",
"2014.052.006",
"2014.052.007",
"2014.052.008",
"2014.056",
"2014.057.001",
"2014.057.002",
"2014.061.016",
"2014.061.018",
"2014.061.031",
"2014.061.032",
"2014.061.064",
"2014.061.075",
"2014.061.095",
"2014.061.116",
"2014.061.119",
"2014.061.142",
"2014.061.153",
"2014.061.161",
"2014.061.164",
"2014.061.168",
"2014.061.177",
"2014.061.182",
"2014.061.183",
"2014.061.185",
"2014.061.187",
"2014.061.188",
"2014.061.193",
"2014.061.202",
"2014.061.202.a",
"2014.061.202.b",
"2014.061.208",
"2014.061.232",
"2014.061.233",
"2014.061.233.a",
"2014.061.233.b",
"2014.061.239",
"2014.061.240",
"2014.061.245",
"2014.061.258",
"2014.061.273",
"2014.061.337",
"2014.061.337.a",
"2014.061.337.b",
"2015.001.001",
"2015.001.002",
"2015.001.003",
"2015.001.004",
"2015.001.005",
"2015.001.005.a",
"2015.001.005.b",
"2015.001.006",
"2015.001.007",
"2015.001.008",
"2015.001.009",
"2015.001.010",
"2015.001.011",
"2015.001.012",
"2015.001.013",
"2015.001.014",
"2015.001.015",
"2015.001.016",
"2015.001.017",
"2015.001.018",
"2015.001.019",
"2015.001.020",
"2015.002.001",
"2015.002.002",
"2015.004",
"2015.009",
"2015.014.001",
"2015.015.001",
"2015.015.002",
"2015.027",
"2015.030.001",
"2015.030.002",
"2015.035.001",
"2015.039",
"2015.043",
"2015.045.003",
"2015.047.001",
"2015.052",
"2015.056",
"2015.061",
"2015.062",
"2015.064.001",
"2015.064.002",
"2015.078",
"2016.006",
"2016.007.002",
"2016.007.003",
"2016.009",
"2016.010",
"2016.018",
"2016.020.001",
"2016.024.004",
"2016.025",
"2016.027.001",
"2016.027.002",
"2016.029",
"2016.030",
"2016.031",
"2016.035",
"2016.049.007",
"2016.049.008",
"2017.004.001",
"2017.004.002",
"2017.006.001",
"2017.007",
"2017.009.001",
"2017.015.003",
"2017.015.004",
"2017.025.387",
"2017.025.437",
"2017.025.447",
"2017.025.540",
"2017.025.667",
"2017.025.725",
"2017.025.729",
"2017.025.809",
"2017.025.812",
"2017.025.822",
"2017.025.825",
"2017.025.963",
"2017.025.1001",
"2017.025.1014",
"2017.039.005",
"2017.041.001",
"2017.042.002",
"2017.050.002",
"2017.050.043",
"2017.052.001",
"2017.052.002",
"2017.052.003",
"2017.052.004",
"2017.052.005",
"2017.052.006",
"2017.052.007",
"2017.052.008",
"2017.052.009",
"2018.001",
"2018.002.030",
"2018.002.046",
"2018.005.001",
"2018.005.002",
"2018.005.003",
"2018.005.004",
"2018.005.005",
"2018.006",
"2018.007",
"2018.010",
"2018.059",
"2018.064",
"2019.001.001",
"2019.001.002",
"2019.001.003",
"2019.001.004",
"2019.001.005",
"2019.007",
"2019.015",
"2019.016.020",
"2019.019",
"AA1966.031",
"IL1992.065.004",
"L1986.032.002",
"L1997.006.004",
"L1997.006.005"
"""
